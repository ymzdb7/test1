<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.winhands.cshj.article.repository.MBDirectoryDao">
  <select id="findDirListByPId" parameterType="Map" resultType="Directory">
  	select t1.dir_id,t1.dir_name,t1.super_dir_id,t1.dir_grade,t1.order_id,t1.create_user_id,
  		t1.create_user_name,t1.create_date,t1.is_valid,t1.is_online,t1.type,
  		t1.spare_1,t1.spare_2,t1.spare_3,t1.start_date,t1.end_date,t1.summary
  	from t_directory t1
  	where t1.super_dir_id=#{super_dir_id} and t1.is_valid='1'
  	<if test="dir_name != null and dir_name != ''">  
	     and t1.dir_name=#{dir_name}
	</if>
	<if test="nowDate != null and nowDate != ''">  
	    and t1.start_date <![CDATA[ <= ]]> #{nowDate}
	</if>
	<if test="nowDate != null and nowDate != ''">  
	    and t1.end_date <![CDATA[ >= ]]> #{nowDate}
	</if>
	order by  cast(order_id as numeric)  desc
  </select>
   <select id="findDirListByPIdWeb" parameterType="Map" resultType="Directory">
  	select t1.dir_id,t1.dir_name,t1.super_dir_id,t1.dir_grade,t1.order_id,t1.create_user_id,
  		t1.create_user_name,t1.create_date,t1.is_valid,t1.is_online,t1.type,
  		t1.spare_1,t1.spare_2,t1.spare_3,t1.start_date,t1.end_date,t1.summary
  	from t_directory t1
  	where t1.super_dir_id=#{super_dir_id}
  	<if test="dir_name != null and dir_name != ''">  
	     and t1.dir_name=#{dir_name}
	</if>
	<if test="nowDate != null and nowDate != ''">  
	    and t1.start_date <![CDATA[ <= ]]> #{nowDate}
	</if>
	<if test="nowDate != null and nowDate != ''">  
	    and t1.end_date <![CDATA[ >= ]]> #{nowDate}
	</if>
	order by  cast(order_id as numeric ) desc
  </select>
  <delete id="delDirectoryByDirId" parameterType="string">
		DELETE FROM t_directory WHERE dir_id = #{dir_id}
  </delete>
</mapper> 